<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" />

    <link rel="shortcut icon" href="../_static/favicon.ico"/><meta name="generator" content="sphinx-3.3.0, furo 2020.11.01.beta14"/>
        <title>Google Summer of Code 2020 - Raphael McSinyx</title>
      <link id="pygments_dark_css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css" href="../_static/pygments_dark.css" />
    <link rel="stylesheet" type="text/css" href="../_static/fab.css" />
    <link rel="stylesheet" href="../_static/styles/default.css?812af7a627c1ace1d26c81ab">
    <link rel="stylesheet" href="../_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../_static/pygments_dark.css">
    


<style>
  :root {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style>
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script><script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="../_static/scripts/main.js?812af7a627c1ace1d26c81ab"></script></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>


<div class="page">
  <header class="mobile-header">
    <label class="header-left nav-overlay-icon" for="__navigation">
      <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
    </label>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Raphael McSinyx</div></a>
    </div>
    <div class="header-right"></div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../index.html">
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/CnX.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Raphael McSinyx</span>
</a><form class="sidebar-search-container" method="get" action="../search.html">
  <input class="sidebar-search" placeholder="Search" name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll">
  <div class="sidebar-tree">
    <ul>
<li class="toctree-l1"><a class="reference internal" href="../works.html">Free Software Works</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../life/index.html">Meatspace Adventures</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../life/2010.html">Why the Name?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../life/2013.html">The Year after the Apocalypse</a></li>
<li class="toctree-l2"><a class="reference internal" href="../life/2020.html">The 2020 Experience</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../math/index.html">Bootleg Lambda Calculus</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../math/conseq.html">Infinite Sequences: A Case Study in Functional Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../math/system.html">System Cascade Connection</a></li>
</ul>
</li>
</ul>

  </div>
  <div id="ethical-ad-placement"></div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div class="section" id="google-summer-of-code-2020">
<h1>Google Summer of Code 2020<a class="headerlink" href="#google-summer-of-code-2020" title="Permalink to this headline">¶</a></h1>
<p>In the summer of 2020, I worked with the contributors of <code class="docutils literal notranslate"><span class="pre">pip</span></code>, trying
to improve the networking performance of the package manager.  Admittedly,
at the end of the <a class="reference external" href="https://summerofcode.withgoogle.com/archive/2020/projects/6238594655584256">internship</a> period, <a class="reference internal" href="blog20200831.html#benchmark"><span class="std std-ref">the benchmark said otherwise</span></a>; though I really hope the clean-up and minor fixes
I happened to be doing to the codebase over the summer, in addition
to the implementation of parallel utils and lazy wheel, might actually
help the project.</p>
<p>Personally, I learned a lot: not just about Python packaging and
networking stuff, but also on how to work with others.  I am really
grateful to <a class="reference external" href="https://github.com/pradyunsg">@pradyunsg</a> (my mentor), <a class="reference external" href="https://github.com/chrahunt">@chrahunt</a>,
<a class="reference external" href="https://github.com/uranusjr">@uranusjr</a>, <a class="reference external" href="https://github.com/pfmoore">@pfmoore</a>, <a class="reference external" href="https://github.com/brainwane">@brainwane</a>, <a class="reference external" href="https://github.com/sbidoul">@sbidoul</a>,
<a class="reference external" href="https://github.com/xavfernandez">@xavfernandez</a>, <a class="reference external" href="https://github.com/webknjaz">@webknjaz</a>, <a class="reference external" href="https://github.com/jaraco">@jaraco</a>,
<a class="reference external" href="https://github.com/deveshks">@deveshks</a>, <a class="reference external" href="https://github.com/gutsytechster">@gutsytechster</a>, <a class="reference external" href="https://github.com/dholth">@dholth</a>,
<a class="reference external" href="https://github.com/dstufft">@dstufft</a>, <a class="reference external" href="https://github.com/cosmicexplorer">@cosmicexplorer</a> and <a class="reference external" href="https://github.com/ofek">@ofek</a>.
While this feels like a long shout-out list, it really isn’t.
These people are the maintainers, the contributors of <code class="docutils literal notranslate"><span class="pre">pip</span></code> and/or
other Python packaging projects, and more importantly, they have been more than
helpful, encouraging and patient to me throughout my every activities,
showing me the way when I was lost, fixing me when I was wrong, putting up with
my carelessness and showing me support across different social media.</p>
<p>To best serve the community, below I have tried my best to document
what I have done, how I’ve done it and why I’ve done it for over
the last three months.  At the time of writing, some work is still in progress,
so these also serve as a reference point for myself and others to reason
about decisions in relevant topics.</p>
<div class="section" id="the-main-story">
<h2>The Main Story<a class="headerlink" href="#the-main-story" title="Permalink to this headline">¶</a></h2>
<p>The storyline can be divided into the following four main acts.</p>
<div class="section" id="act-one-parallelization-utilities">
<h3>Act One: Parallelization Utilities<a class="headerlink" href="#act-one-parallelization-utilities" title="Permalink to this headline">¶</a></h3>
<p>In this first act, I ensured the portibility of parallelization
measures for later use in the final act.  Multithreading and multiprocessing
<code class="docutils literal notranslate"><span class="pre">map</span></code> were properly fellback on platforms without full support.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8320">GH-8320</a>: Add utilities for parallelization (close <a class="reference external" href="https://github.com/pypa/pip/pull/8169">GH-8169</a>)</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8538">GH-8538</a>: Make <code class="docutils literal notranslate"><span class="pre">utils.parallel</span></code> tests tear down properly</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8504">GH-8504</a>: Parallelize <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">list</span> <span class="pre">--outdated</span></code> and <code class="docutils literal notranslate"><span class="pre">--uptodate</span></code>
(using <a class="reference external" href="https://github.com/pypa/pip/pull/8320">GH-8320</a>)</p></li>
</ul>
</div>
<div class="section" id="act-two-lazy-wheels">
<h3>Act Two: Lazy Wheels<a class="headerlink" href="#act-two-lazy-wheels" title="Permalink to this headline">¶</a></h3>
<p>As proposed by <a class="reference external" href="https://github.com/cosmicexplorer">@cosmicexplorer</a> in <a class="reference external" href="https://github.com/pypa/pip/pull/7819">GH-7819</a>, it is possible to only
download a portion of a wheel to obtain metadata during dependency resolution.
Not only that this would reduce the total amount of data to be transmitted over
the network in case the resolver needs to perform heavy backtracking, but also
it would create a synchronization point at the end of the resolution progress
where parallel downloading can be applied to the needed wheels (some wheels
solely serve their metadata during dependency backtracking and are not needed
by the users).</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8467">GH-8467</a>: Add utitlity to lazily acquire wheel metadata over HTTP</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8584">GH-8584</a>: Revise lazy wheel and its tests</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8681">GH-8681</a>: Make range requests closer to chunk size (help <a class="reference external" href="https://github.com/pypa/pip/pull/8670">GH-8670</a>)</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8716">GH-8716</a> and <a class="reference external" href="https://github.com/pypa/pip/pull/8730">GH-8730</a>: Disable caching for range requests</p></li>
</ul>
</div>
<div class="section" id="act-three-late-downloading">
<h3>Act Three: Late Downloading<a class="headerlink" href="#act-three-late-downloading" title="Permalink to this headline">¶</a></h3>
<p>During this act, the main works were refactoring to integrate the <em>lazy wheel</em>
into <code class="docutils literal notranslate"><span class="pre">pip</span></code>’s codebase and clean up the way for download parallelization.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8411">GH-8411</a>: Refactor <code class="docutils literal notranslate"><span class="pre">operations.prepare.prepare_linked_requirement</span></code></p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8629">GH-8629</a>: Abstract away <code class="docutils literal notranslate"><span class="pre">AbstractDistribution</span></code>
in higher-level resolver code</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8442">GH-8442</a>, <a class="reference external" href="https://github.com/pypa/pip/pull/8532">GH-8532</a> and <a class="reference external" href="https://github.com/pypa/pip/pull/8588">GH-8588</a> (later reworked by <a class="reference external" href="https://github.com/chrahunt">@chrahunt</a>
in <a class="reference external" href="https://github.com/pypa/pip/pull/8685">GH-8685</a>): Use lazy wheel to obtain dependency information
for the new resolver</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8743">GH-8743</a>: Test hash checking for <code class="docutils literal notranslate"><span class="pre">fast-deps</span></code></p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8804">GH-8804</a>: Check download directory before making range requests</p></li>
</ul>
</div>
<div class="section" id="act-four-batch-downloading-in-parallel">
<h3>Act Four: Batch Downloading in Parallel<a class="headerlink" href="#act-four-batch-downloading-in-parallel" title="Permalink to this headline">¶</a></h3>
<p>The final act is mostly about the UI of the parallel download.
My work involved around how the progress should be displayed
and how other relevant information should be reported to the users.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8710">GH-8710</a>: Revise method fetching metadata using lazy wheels</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8722">GH-8722</a>: Dedent late download logs (fix <a class="reference external" href="https://github.com/pypa/pip/pull/8721">GH-8721</a>)</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8737">GH-8737</a>: Add a hook for batch downloading</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8771">GH-8771</a>: Parallelize wheel download</p></li>
</ul>
</div>
</div>
<div class="section" id="the-side-quests">
<h2>The Side Quests<a class="headerlink" href="#the-side-quests" title="Permalink to this headline">¶</a></h2>
<p>In order to keep the wheel turning (no pun intended) and avoid wasting time
waiting for the pull requests above to be reviewed, I decided to create
even more PRs (as I am typing this, many of the patches listed below
are nowhere near being merged).</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/7878">GH-7878</a>: Fail early when install path is not writable</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/7928">GH-7928</a>: Fix rst syntax in Getting Started guide</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/7988">GH-7988</a>: Fix tabulate col size in case of empty cell</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8137">GH-8137</a>: Add subcommand alias mechanism</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8143">GH-8143</a>: Make mypy happy with beta release automation</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8248">GH-8248</a>: Fix typo and simplify ireq call</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8332">GH-8332</a>: Add license requirement to <code class="docutils literal notranslate"><span class="pre">_vendor/README.rst</span></code></p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8423">GH-8423</a>: Nitpick logging calls</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8435">GH-8435</a>: Use str.format style in logging calls</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8456">GH-8456</a>: Lint <code class="docutils literal notranslate"><span class="pre">src/pip/_vendor/README.rst</span></code></p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8568">GH-8568</a>: Declare constants in configuration.py as such</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8571">GH-8571</a>: Clean up <code class="docutils literal notranslate"><span class="pre">Configuration.unset_value</span></code> and nit <code class="docutils literal notranslate"><span class="pre">__init__</span></code></p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8578">GH-8578</a>: Allow verbose/quiet level to be specified
via config files and environment variables</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8599">GH-8599</a>: Replace tabs by spaces for consistency</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8614">GH-8614</a>: Use <code class="docutils literal notranslate"><span class="pre">monkeypatch.setenv</span></code> to mock environment variables</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8674">GH-8674</a>: Fix <code class="docutils literal notranslate"><span class="pre">tests/functional/test_install_check.py</span></code>,
when run with new resolver</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8692">GH-8692</a>: Make assertion failure give better message</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8709">GH-8709</a>: List downloaded distributions before exiting (fix <a class="reference external" href="https://github.com/pypa/pip/pull/8696">GH-8696</a>)</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8759">GH-8759</a>: Allow py2 deprecation warning from setuptools</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8766">GH-8766</a>: Use the new resolver for test requirements</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8790">GH-8790</a>: Mark tests using remote svn and hg as xfail</p></li>
<li><p><a class="reference external" href="https://github.com/pypa/pip/pull/8795">GH-8795</a>: Reformat a few spots in user guide</p></li>
</ul>
</div>
<div class="section" id="the-plot-summary">
<h2>The Plot Summary<a class="headerlink" href="#the-plot-summary" title="Permalink to this headline">¶</a></h2>
<p>Every Monday throughout the Summer of Code, I summarized what I had done
in the week before in the form of either a short blog or an (even shorter)
check-in.  These write-ups often contain handfuls of popular culture references
and was originally hosted on <a class="reference external" href="https://blogs.python-gsoc.org/en/mcsinyxs-blog/">Python GSoC</a>.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="checkin20200601.html">First Check-In</a></li>
<li class="toctree-l1"><a class="reference internal" href="blog20200609.html">Unexpected Things When You’re Expecting</a></li>
<li class="toctree-l1"><a class="reference internal" href="checkin20200615.html">Second Check-In</a></li>
<li class="toctree-l1"><a class="reference internal" href="blog20200622.html">The Wonderful Wizard of O’zip</a></li>
<li class="toctree-l1"><a class="reference internal" href="checkin20200629.html">Third Check-In</a></li>
<li class="toctree-l1"><a class="reference internal" href="blog20200706.html">I’m Not Drowning On My Own</a></li>
<li class="toctree-l1"><a class="reference internal" href="checkin20200713.html">Fourth Check-In</a></li>
<li class="toctree-l1"><a class="reference internal" href="blog20200720.html">I’ve Walked 500 Miles…</a></li>
<li class="toctree-l1"><a class="reference internal" href="checkin20200727.html">Fifth Check-In</a></li>
<li class="toctree-l1"><a class="reference internal" href="blog20200803.html">Sorting Things Out</a></li>
<li class="toctree-l1"><a class="reference internal" href="checkin20200810.html">Sixth Check-In</a></li>
<li class="toctree-l1"><a class="reference internal" href="blog20200817.html">Parallelizing Wheel Downloads</a></li>
<li class="toctree-l1"><a class="reference internal" href="checkin20200824.html">Final Check-In</a></li>
<li class="toctree-l1"><a class="reference internal" href="blog20200831.html">Outro</a></li>
</ul>
</div>
</div>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          
          
        </div>

        <div class="related-information">
          <span class="copyright">Copyright &copy; 2018-2020, Nguyễn Gia Phong</span> |
          Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using
          <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
          <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree">
          <ul>
<li><a class="reference internal" href="#">Google Summer of Code 2020</a><ul>
<li><a class="reference internal" href="#the-main-story">The Main Story</a><ul>
<li><a class="reference internal" href="#act-one-parallelization-utilities">Act One: Parallelization Utilities</a></li>
<li><a class="reference internal" href="#act-two-lazy-wheels">Act Two: Lazy Wheels</a></li>
<li><a class="reference internal" href="#act-three-late-downloading">Act Three: Late Downloading</a></li>
<li><a class="reference internal" href="#act-four-batch-downloading-in-parallel">Act Four: Batch Downloading in Parallel</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-side-quests">The Side Quests</a></li>
<li><a class="reference internal" href="#the-plot-summary">The Plot Summary</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      
      
    </aside>
  </main>
</div>
  </body>
</html>